{% extends 'lms/base.html' %}
{% block title %}{{ object.title }} — Innoknowvex{% endblock %}
{% block header %}<h1 class="text-2xl font-bold">{{ object.title }}</h1>{% endblock %}
{% block content %}
<div class="bg-gray-800 p-4 rounded">
  <p class="text-gray-400">{{ object.short_description }}</p>
  <div class="mt-4">
    {% if not is_enrolled %}
      <p class="text-yellow-300">You are not enrolled in this course.</p>
      <a href="{% url 'lms:enroll_course' course_slug=object.slug %}" class="inline-block mt-2 px-3 py-1 border rounded">Enroll</a>
    {% else %}
      <p class="text-green-300">You are enrolled — access lessons below.</p>
    {% endif %}
  </div>

  <div class="mt-4 space-y-3">
    {% for module in object.modules.all %}
    <div class="p-3 rounded border border-gray-700">
      <h4 class="font-semibold">{{ module.title }}</h4>
      <ul class="mt-2 list-inside">
        {% for lesson in module.lessons.all %}
        <li><a href="{% url 'lms:lesson_detail' course_slug=object.slug module_slug=module.slug lesson_slug=lesson.slug %}" class="text-indigo-300">{{ lesson.title }}</a></li>
        {% endfor %}
      </ul>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
